slug: pe-develop-and-maintain-lab-3-0
id: vavo214rpwgx
type: sandbox
title: Refactor the apache Web Server Profile
teaser: Use Hiera and class parameters to abstract the port value in the apache profile.
description: |+
  # We're putting the finishing touches on this BETA Puppet Practice Lab â€” go ahead and take a peek!

  Please help us find any bugs that need to be zapped and share your feedback for improving this learning experience by clicking the **Bug Zapper** tab at the top of each challenge and completing the short survey.

  We welcome your suggestions and value your feedback. If you have additional comments or suggestions after completing this BETA Puppet Practice Lab, please [reach out to us directly](mailto:education@puppet.com).
  ___
  In this scenario, you'll configure nodes whose pp_datacenter fact is set to "dc-west" to serve web server applications on port 8080 instead of port 80, which is the port specified in the organization's default apache.pp profile.

  To do this, you'll use Hiera and class parameters to abstract the port value in the apache profile.


  **What you'll learn**

  In this lab, you will:

  - Run a PQL query to get the list of nodes in the dc-west data center.
  - Extend the apache profile by using a class parameter to abstract port information.
  - Test your changes by running Puppet against a specific node group.
  - Test your changes incrementally in a canary release. Within the subset of nodes in the canary release, you'll run Puppet in no-op mode and run it again normally.
  - Deploy code to the production environment.


  **Prerequisites**

  [Refactor the Base Profile](https://play.instruqt.com/puppet/tracks/pe-develop-and-maintain-lab-2-1)

  **Technical requirements**

  For the best lab experience, please use one of the following browsers:
   - [Google Chrome](https://www.google.com/chrome/)
   - [Microsoft Edge](https://www.microsoft.com/en-us/edge)
  Mozilla Firefox and Apple Safari are not suitable for this lab. If you are not able to use one of the required browsers, refer to the [Lab Help Guide](https://puppet-kmo.gitbook.io/practice-lab-help/) for assistance.

  ---
  **Keep an eye on the clock**

  ![30 minute lab](https://storage.googleapis.com/instruqt-images/Clocks%20for%20Track%20Duration/30min100.png) The virtual learning environment will stay up for 60 minutes, however, **this lab should only take about 30 minutes** to complete. When your learning environment expires, your work will not be saved. If you haven't completed the lab, you can simply restart it.

  Click **Start track** when you're ready to begin.

icon: https://storage.googleapis.com/instruqt-images/bz-smallicon-1.png
tags:
- ""
- BACKUP
- PE301
owner: puppet
developers:
- jain.waldrip@puppet.com
- alex.williamson@puppet.com
- greg.larkin@puppet.com
- thomas.chisholm@puppet.com
private: true
published: true
show_timer: true
checksum: "12382337453351394787"
